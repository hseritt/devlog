{% load ui_tags %}
<div class="container mt-4">
  <h2>Open Tasks Lists by Project</h2>
</div>

<div id="task_by_project" class="container mt-4 mb-4">
  {% for project in project_qs %}
  <h3>{{ project.name }} ({{ project.prefix|default:'-' }})</h3>
  <table class="table table-striped table-bordered">
    <thead class="table-dark">
      <th>No.</th>
      <th>Subject</th>
      <th>Type</th>
      <th>Effort</th>
      <th>Created</th>
      <th>Status</th>
      <th>Assigned To</th>
      <th>Sprint</th>
    </thead>

    <tbody>
      {% for task in project.task_set.all|task_open_status  %}
      <tr>
        <td>{{project.prefix|default:'N/A' }}-{{ task.id }}</td>
        <td>{{ task.subject }}</td>
        <td>{{ task.type }}</td>
        <td>{{ task.effort }}</td>
        <td>{{ task.created|date:"m/d/Y" }}</td>
        <td>{{ task.status }}</td>
        <td>{{ task.assigned_to }}</td>
        <td>{{ task.sprint.name|default:'Backlog' }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="8">None</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% endfor %}
</div>